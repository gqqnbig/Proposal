\chapter{Introduction}

%Software development is the process of creating, specifying, programming, testing, and supporting software involved in creating and maintaining applications, frameworks, or other software components.
%Software development involves writing and maintaining the source code, but in a broader sense, it includes all processes from the conception of the desired software through to the final manifestation of the software, typically in a planned and structured process.
%Software development also includes research, new development, prototyping, modification, reuse, re-engineering, maintenance, or any other activities that result in software products.


A smart contract is a program running on a blockchain platform.
Businesses often use it as a signed contract or an agreement to regulate the stakeholders~\cite{savelyev2017contract}
because smart contracts reduce the need in trusted intermediators, arbitrations, and enforcement costs.

To enjoy the benefits of smart contracts, people have to develop smart contracts.
Software development typically involves the following phases, requirements engineering, implementation, testing, release, and maintenance~\cite{petersen2009waterfall}. We notice major difficulties in smart contract development happen in requirements engineering and implementation.



On the other hand, businesses are using conventional software to help deal with their business logic.
Some of these software are open source and hosted on GitHub.
GitHub is a provider of Internet hosting for software development and version control using Git. It provides issue tracking, wiki, continuous integration, and many other free features.
GitHub is a rich corpus for machine learning researchers.

Whereas it is difficult to implement smart contract correctly from the scratch,
whereas many of such smart contracts have their counterpart already implemented as conventional applications,
we believe it is ideal to transform these applications into smart contracts.

There are two approaches for the transformation. The first is to transform from requirement documents.
Requirement documents capture raw information but open source projects typically do not publish such documents.
The second is to transform from the application functional implementation.
The source code of open source projects are by definition available but the code may contain too many details and noises.

Regardless of the approach,
due the properties of blockchains and smart contracts, we do not think all conventional applications can be safely transformed to smart contracts.
Thus in this paper we propose to identify the patterns of conventional applications and tell which is transformable.
Then we implement algorithms to transform these applications to smart contracts.



\section{General overview of the field of study}


Marking the dawn of a new era, blockchain technology is a ground-breaking innovation in decentralized information technology.
The most famous blockchain platforms are Bitcoin and Ethereum.
Bitcoin reached a market cap of \$780 billion as of January 2022, and the value of one bitcoin is $5 \times 10^7$ times the value in 2010.
The Taproot upgrade took place in 2017 enabled Bitcoin to natively execute smart contracts.
Ethereum is the second largest blockchain platform with market cap of \$360 billion, which has more mature support of smart contract.

Bitcoin and Ethereum are public and permission-less blockchains.
This means, everyone can view the transaction data, make transactions, or send queries.
On the other hand, Hyperledger is a rising star in the blockchain market. It is an umbrella project of open source blockchains and related tools, started in December 2015 by the Linux Foundation with consistent contributions from IBM, Intel, and so on.
In Hyperledger, Fabric is the most developed platform, which is permissioned (a central authority determines who can join the blockchain) and can run smart contracts developed in Java, JavaScript, or NodeJS language.
In Fabric, smart contract is called chaincode. Although Ethereum and Hyperledger Fabric both can run smart contracts, Hyperledger Fabric is preferred by businesses due to the permissioning.


% Blockchain brings three basic functionalities, namely anti-forgery information, transaction verification, and smart contract~\cite{dao2019challenges}.






%Modern software development uses version control systems and since 2014 the use of Git outpaced SVN~\cite{says_eclipse_2014}. People often host their Git repositories on GitHub.


Sometimes, people tend to use the term smart contract and {\dapp} to refer to the same thing,
while \etal{Johnston}~\cite{johnston2014general} argues they are different.
{\dapp} is short for decentralized application.
For an application to be considered a {\dapp}, Johnston gave the following criteria:

\begin{enumerate}
\item The application must be open source. There is no entity controlling the application. Its data are stored in a public blockchain.

If the source code of an application is not open, the code is open to certain parties. Then the parties are the central entities of the application and the application is not decentralized.

\item The application has tokens to reward user participation. Users spend tokens to interact with the application.

In Bitcoin, miners get rewards through mining. In order to move assets from one address to another, like assigning a value from one variable to another, the caller (trader) must pay a network fee.

\item The application can be changed in response to consensus of its users.
\end{enumerate}

Johnston further summarized the development of a {\dapp}: a group of people released a whitepaper describing the envisioned {\dapp}, as well as a reference program for mining or interaction. At that stage, the ownership of the application is on these people.
Through mining or staking, the ownership spreads to more people, and the application becomes decentralized.

In light of Johnston's definition, a {\dapp} can be a protocol, e.g., Bitcoin, or a group of smart contracts.
In this paper we mainly grapple one or a couple of smart contracts, and we do not zero in the decentralization part.

There are challenges in writing smart contracts correctly.
For example, it's common for a smart contract to call another smart contract, and there is nothing preventing the latter calls back the former, which forms reentrancy.
The DAO attack was caused by a reentrancy problem and the attacker stole \$50 million~\cite{dao-attack}.


\section{Motivation}


Although the development of smart contracts is in its infancy, its potential is obvious. Many businesses want to realize smart contracts according to the signed paper contract.
As it is difficult to implement smart contracts correctly from the scratch,
we are motivated to automatically generate them.

\etal{Yang}~\cite{yang2019automated} proposed a tool, RM2PT, to transform a requirement document into a Java desktop program.
We contemplate to improve RM2PT so that it can generate smart contracts.
Since businesses typically want to use a permissioned blockchain platform, we are going to target Hyperledger Fabric and generate smart contracts in the Java language.

To archive this, we should study characteristics of blockchains and smart contracts, find out which functional implementations are transformable to smart contracts.
Classification neural networks are a popular tool for various tasks.
We plan to use neural network to classify conventional applications and find the ones that can be transformed to smart contract.
During the next transformation phase, we can either transform based on fixed rule sets or use neural networks again.



%Requirements errors are one of the causes leading failings in software projects~\cite{sutcliffe1999tracing}.
%Careful requirements modeling along with systematic validation helps to reduce the uncertainty about target systems [2], [3]. The goal of requirements validation is to construct the consistent requirements for the needs of target users [4]. However, this process is complicated, and it can be hard to produce a correct and complete requirements specification. The complexity is due to the following interrelated attributes [5]â€“[7]:
%1) the complexity of application domains and business processes;2) the uncertainty of clients and domain experts about their needs;3) the lack of the understanding of system developers about application domains;4) the difficulties of the understanding between system developers and clients.
%Rapid prototyping is an effective approach to requirements validation and evolution via an executable model of a software system to demonstrate concepts, discover requirements errors and find possible fixing solutions, and discover missing requirements~\cite{kordon2002introduction}.
%Therefore, it is very desirable to have a tool that generates prototypes directly from requirements.




%After a prototype is generated, developers need to further implement it, typically with the help of a version control system,
%which organizes a group of interrelated changes to the code, sometimes called diff, as a commit, together with a commit message explaining the rational behind the changes or other useful information.
%A version control system tracks and manages changes to software code thus helps the team manage changes to source code over time.
%However, commit messages can be incomplete or inaccurate~\cite{buse2010automatically} and undermine developers' ability to understand the commit.
%For example, when writing commit messages,
%a developer may say only identifiers were changed
%if he or she didn't check the diff very carefully,
%while the developer actually changed some white spaces or fixed a few minor bugs.
%In order to enforce software quality and the quality of commit messages,
%code review is introduced as a process in software engineering,
%where another developer reviews the committed code and
%the commit messages made by the former developer~\cite{shimagaki2016study}.

%We believe that commits can be classified based on their diff.
%Proper classification of commits can remedy incomplete or inaccurate commit messages written manually, and
%guide code reviewers to pick commits to review.
%This smooths the process of software development and helps control code quality and prevent bugs.



